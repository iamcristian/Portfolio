---
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import Section from "../ui/Section.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { title, items, keyResponsabilities, skills } = t("experience");
---

<Section id="experience" title={title}>
  <ul
    class="timeline timeline-snap-icon max-md:timeline-compact timeline-vertical"
  >
    {
      items.map((item, index) => (
        <li>
          {index !== 0 && <hr />}

          {/* Timeline icon */}
          <div class="timeline-middle">
            <svg class="h-5 w-5">
              <use href="#icon-check-one" />
            </svg>
          </div>

          {/* Timeline content */}
          <div
            class={`${
              index % 2 === 0 ? "timeline-start md:text-end" : "timeline-end"
            } mb-2`}
          >
            <time class="font-mono italic">{item.date}</time>
            <div class="text-lg font-black">{item.title}</div>
            <div class="text-base font-semibold text-base-content/70">
              {item.company}
            </div>
            <p class="mt-2 text-sm">{item.description}</p>
            <div class="mt-4">
              <h4 class="font-bold">{keyResponsabilities}</h4>
              <ul class="text-xs list-disc list-inside">
                {item.responsabilities.map((responsibility) => (
                  <li>{responsibility}</li>
                ))}
              </ul>
            </div>
            <div class="mt-4">
              <h4 class="font-bold">{skills}</h4>
              <div
                class={`flex flex-wrap gap-2 ${
                  index % 2 === 0 ? "justify-end" : "justify-start"
                }`}
              >
                {item.skills.map((skill) => (
                  <span class="text-xs px-2 py-1 rounded">{skill}</span>
                ))}
              </div>
            </div>
          </div>

          {index !== items.length - 1 && <hr />}
        </li>
      ))
    }
  </ul>
</Section>
